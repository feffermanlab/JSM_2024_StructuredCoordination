\documentclass[]{article}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{graphicx}


\newtheorem{theorem}{Theorem}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{corrollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{example}[theorem]{Example}
%opening
\title{An $n \times n$ Structured Coordination Game and its Applications to Theoretical Ecology: Project Description}
\author{John McAlister}
\newcommand{\uu}{\mathbf{u}}
\begin{document}

\maketitle

\begin{abstract}
	When individuals in a network attempt to take on the strategy which is most prevalent among their neighbors, we can describe this as a structured coordination game with $n$ players and up to $n$ strategies. Using ideas inspired by dynamical systems we can describe a system wherein each vertex is updating to take on its best response at every iteration. It is easy to see that equilibria of this system are Nash Equilibria of the game itself. This system can have many non-trivial equilibria. In this project we seek to classify equilibria of the system for particular well understood graphs, and characterize equilibria of a general graph with methods from extremal graph theory. We also seek to derive stability conditions for equilibria using classical algebraic techniques from graph theoretical dynamical systems. Lastly, we consider reformulating the problem as a boundary value problem. Seeking an algorithm to find an equilibrium interpolation of compatible boundary data, we may begin to investigate some interesting applications of this system. We believe this last point in particular to have interesting applications for understanding the evolution of cooperative behavior.    
\end{abstract}

\section{Introduction}
\begin{figure}[h!]
	\centering
	\begin{tabular}{c|cc}
		&A&B\\
		\hline 
		A&a,a&c,d\\
		B&d,c&b,b
	\end{tabular}
	\caption{The payoff matrix for symmetric $2\times 2$ game. In a coordination game it is assumed that $a>d$, $b>c$, and without loss of generality $a\geq b$. The case considered for much of this analysis is $a=b=1$, $c=d=0$.}
\end{figure}
A coordination game is a game in which players attempt to use the same strategy as their opponents for an increased payoff. In the case where there are two players and two strategies to choose from, there are two obvious pure strategy Nash Equilibria and one mixed strategy Nash equilibrium. The game in this setting is thoroughly understood. Here we consider the game in a structured population of $n$ players which can choose from up to $n$ strategies. 

The discrete version of these games with low structure have been considered in the past \cite{Kandori1993,Kandori1995} most notably by Kandori, Mailath, and Rob. However they often take an approach with high inertia and rare mutation. Under these conditions in a well mixed group where individuals are paired off randomly, the population will tend to a stationary strategy distribution which, in the case of the pure coordination game, will consist of only one strategy. In the $2\times 2$ case the risk-dominant strategy is selected for. A change to the matching mechanism may result in convergence to the Pareto-dominant equilibrium \cite{Robson1995} but the model still relies on random mutation and high inertia. In all of these papers, the main result is that stochastisity can lead to dynamics which favor certain Nash equilibria over others.  

Also common to these early models, which sought to apply the new evolutionary game theory in economic contexts, is the lack of structured interaction. The way the model is formulated, every individual interacts with every other individual with equal probability. Adding structure whether that be discrete or continuous, changes the game a great deal. The study of this game in a structured discrete case was first performed by George Ellison in 1993 \cite{Ellison1993}. This landmark paper considered the $2\times2$ game where each individual was constantly updating their strategy with myopic best response plus some noise. Additionally he considered the players to have local interactions with pairwise interactions happening uniform randomly with only a limited number of individuals. The structured version of this game was organized in so called "circular cities" where individuals associated with some number of individuals close to them in the circle. The Symmetry allowed Ellison to collapse the state space of this game significantly and draw conclusions about longrun equilibrium and convergence time given some level of noise.   

Other more recent examinations of structured coordination games have extended this work \cite{Buskens2016, Tomassini2010} but these studies have only considered $n$ players picking from 2 strategies. We seek to extend this work further by examining the situation in which there are up to $n$ discrete strategies available (which is trivially extendable to the case when there are an infinite number of strategies available)
An other study looked at a game which could be called an $n\times n$ structured coordination game\cite{Szabo2016} but the structure was always a square lattice and all but two of the strategies were neutral.
A similar type of problem in which strategies exist in a metric space has also been considered. %cite some
However, when strategies are not measurable against one another and offer truly neutral intrinsic fitnesses, we can no longer use the standard ODE or difference equation models.


\subsection{The Game}
We hope to investigate an $n\times n$ structured coordination game with distinct strategies which provide no intrinsic fitness benefit. That is to say that the payoff matrix for any pair of players which interact is the identity matrix. Consider a connected graph $G(V,E)$ and strategy profile $\uu$ assigning a pure strategy to each vertex, where the pure strategies are chosen from the set $C$ and the strategy profiles comes from the set of pure strategies $U$ which is of size $n^n$. This is most naturally conceptualized as a (not necessarily proper) vertex coloring of the graph which use colors in $C$. Consider now the game where the payoff of each vertex. $v$, is determined by the sum of the payoffs of playing the coordination game with each of its neighbors. This is equivalent, in the simplest case, to computing payoff as the number of neighbors which are using the same strategy. The payoff function is $w:V\times C\times U\rightarrow \mathbb{N}$.
For any strategy profile $\uu$ (which we think of as a strategy vector of length equal to the number of vertices) we can calculate a best response for each vertex by finding which strategy would have maximized fitness given the current strategy profile. Definitionaly, a Nash Equilibrium of this game is the state wherein every vertex is playing its best response and would not increase its fitness by changing strategy. 
\subsection{The Dynamical System}
If we use a myopic best response as a replicator dynamic, we get the following dynamical system
\begin{equation}
	\mathbf{u}_{k+1}=F(\mathbf{u}_k):=[\text{argmax}_{c\in C}\{w(v,c;\mathbf{u}_k)\} ]_{v\in V}
\end{equation}
Because argmax might be larger than a single color we have to carefully break ties. If $\mathbf{u}_{k,v}\in \text{argmax}_{c\in C}{w(v,c,\mathbf{u}_k)}$ then $\mathbf{u}_{k+1,v}=\mathbf{u}_{k,v}$. Otherwise ties are broken uniform randomly. This process results in a sequence of strategy profiles $(\mathbf{u}_k)_{k=0}^N$ which we call an orbit. It is easy to see that equilibria of this dynamical system are Nash equilibria of the game. Some equilibria are easy to see (Fig. 2) but some are nontrivial. (Fig. 3)
\begin{figure}[h!]
	\includegraphics[width=\linewidth]{images/figure4}
	\caption{A trivial equilibrium coloring}
\end{figure}
\begin{figure}
	\includegraphics[width=\linewidth]{images/figure3}
	\caption{A nontrivial equilibrium coloring with three cliques.}
\end{figure}

Equilibria can be separated into (typically connected) subgraphs,  called cliques, wherein each vertex has the same color. The equilibrium coloring with exactly 1 clique is the trivial equilibrium and exists in every graph. A graph generally admits nontrivial equilibria with multiple cliques as well. To discuss cliques more fully we introduce some notation.
\begin{center}
	\begin{tabular}{c|l}
		symbol&definition\\
		\hline
		$Q(\mathbf{u})$& The set of all cliques in a coloring $\mathbf{u}$\\
		$q_i$& A cliques in $Q(\mathbf{u})$\\
		$\partial q_i$ &The set of vertices in $q_i$ which have neighbors in other cliques. 	
	\end{tabular}
\end{center}

 A sequence of colorings does not necessarily stop at an equilibrium. Often a two-cycle can arise (Fig. 4). In two-cycles, we can still define cliques among the vertices which do not change in the same way as before. It may also become useful to discuss the connected subgraphs which alternate colors as ``two-cliques."

\begin{figure}[]
	\includegraphics[width=\linewidth]{images/figure6}
	\caption{An example of a two-cycle. If each vertex plays its best response to the coloring on the right it becomes the coloring on the left and if each vertex plays its best response to the coloring on the left it becomes the coloring on the right. }
\end{figure}

Although the rules of the game do not explicitly disallow cycles larger than 2-cycles, no such cycles have been found. We conjecture that such cycles are indeed impossible.  

\section{Equilibria}
The first task is understanding this game is to understand its equilibria. There are many ways in which this might be done. Below are some theorems and conjectures regarding equilibria and limits. 

\begin{theorem}[No nontrivial equilibria in $K_n$]
	In the complete graph on $n$ vertices, $K_n$, the only equilibrium coloring is the trivial coloring.
\end{theorem} 
\begin{proof} Suppose that $K_n$ has an equilibrium coloring $\mathbf{u}^*$ with $m\geq 2$ cliques, $q_1,...,q_m$ which have colors $c_1,...,c_m$ respectively. (notice that every clique is connected to every other clique so we can be assured that to two cliques have the same color.) Because ever pair of vertices shares an edge, $w(v,c_i;\mathbf{u}^*)=|q_i|$ if $v\notin q_i$ and  $w(v,c_i;\mathbf{u}^*)=|q_i|-1$ if $v\in q_i$. Consider $v_1\in q_i$. Because $\mathbf{u}^*$ is an equilibrium coloring we know that
\begin{equation}
	w(v_1,c_1;\mathbf{u}^*)=\max_C\{w(v_1,C;\mathbf{u}^*)\} =:a
\end{equation}
Therefore $|q_1|=a+1$. Now observe that $w(v_1,c_2;\mathbf{u}^*)\leq a $ so $|q_2|\leq a$. Consider a vertex $v_2\in q_2$. $w(v_2,c_2;\mathbf{u}^*)=|q_2|-1\leq a-1$ but $w(v_2,c_1;\mathbf{u}^*)=|q_1|=a+1$. Thus
\begin{equation}
	w(v_2,c_2;\mathbf{u}^*)<\max_C\{w(v_2,c;\mathbf{u}^*)\}
\end{equation}
so $\mathbf{u}^*$ is not an equilibrium coloring. 
\end{proof} 

\begin{conjecture}[Complete Bipartite Equilibria]
	The complete bipartite graph $K_{m,n}$ has an equilibrium with $k$ cliques if and only if $k$ is a common divisor of $m$ and $n$.  
\end{conjecture}
\begin{proof}
		Consider $K_{n,m}$ and separate the vertices into the two parts $V_1$ which has $n$ vertices and $V_2$ which has $m$ vertices. Let $d$ be a common divisor of $m$ and $n$. 
		
		We start by easily constructing an equilibrium coloring with $d$ cliques using colors $c_1,...,c_d$. color $n/d$ of the vertices in $V_1$ with each color and $m/d$ of the vertices in $V_2$ with each color. Clearly we will have given every vertex exactly one color. Now observe that this is an equilibrium because for any vertex $v\in V_1$ which has the color $c_1$, $w(v,c_1)=m/d=\max_c\{w(v,c)\}.$ likewise for any vertex $x\in V_2$ which has the color $c_2$, $w(x,c_2)=n/d=\max_c\{w(x,c)\}.$ Therefore every vertex is playing its best response and this coloring is therefore an equilibrium. 
		
		Next we need to exclude equilibria with $d$ cliques where $d$ is not a common divisor of $n$ and $m$. I don't know how to do this yet
\end{proof} 

\begin{lemma}[No cliques of size 1]
	if $\uu$ is a equilibrium coloring, then $\uu$ cannot contain any cliques of size 1.
\end{lemma}
\begin{proof}
	This result is obvious.
\end{proof}

\begin{corrollary}[Global Energy Threshold]
	For any connected graph $G(V,E)$, let $E_d(\uu)=\{(x_i,x_j)\in E| \uu_{i}\neq \uu_{j}  \}$. Furthermore let $e(\uu)=|E_d(\uu)|$. There exists a critical energy $e^*=|E|- n/2$  such that, if $e(\uu)>e^*$, then $\uu$ is not a Nash Equilibrium. 
\end{corrollary}

\begin{proof}
	If $\uu$ is a Nash Equilibrium then $e_v(\uu)\leq d_v-1$ by the previous lemma. Thus $e(\uu)=\frac{1}{2}\sum_Ve_v(\uu)\leq \frac{1}{2}\sum_Vd_v-\frac{1}{2}\sum_V1 = |E|-\frac{n}{2}$. Thus if $e(\uu)>|E|-\frac{n}{2}$ $\uu$ is not a Nash Equilibrium. 
\end{proof}

\begin{example}
	Let $G$ be a $k-$regular graph on $n$ vertices. The number of edges is $\frac{k}{2}n$ (Where at least $k$ or $n$ is even). If $e(\uu)>\frac{k}{2}n-\frac{1}{2}n = \frac{k-1}{2}n$ then $\uu$ is not at equilibrium.
\end{example}
\begin{example}
	Let $G$ be a tree on $n$ vertices. The number of edges is $n-1$ so if $e(\uu)> n-1-\frac{n}{2}=\frac{n}{2}-1$ then $\uu$ is not at equilibrium. 
\end{example}

\begin{lemma}
	If $v$ is vertex in a finite graph $G$, and every neighbor of $v$ has a constant color in the sequence of colorings $\uu_1,\uu_2,\uu_3,....$ then $v$ must remain the same color after 1 time step. 
\end{lemma}
\begin{proof}
	The neighbors of $v$ have colors which are constant in the sequence of colorings any coloring so the number of neighbors of $v$ with the color $c$ (which we will call $n_c$) is constant in time. Because the graph is finite we can order these $n_c$s. Without loss of generality order them as $n_{c_1}\leq n_{c_2}\leq...\leq n_{c_m}$. Let this largest $n_{c_m}=:M$ Clearly $w(v,c_i;\uu_j)=n_{c_i}$ for all $i,j$. Following the construction of the system $[\uu_i]_k=\text{argmax}_{c\in C}[w(v,c,\uu_{i-1})]= \text{argmax}_{c\in C} n_{c}$. Thus after one time step $v$ takes on one of the colors with $n_{c_i}=M$. In the next time step, because all of $v$'s neighbors keep the same color, and because of the tie breaking rule, $v$ will stay the same color in every coloring thereafter. 
\end{proof}

\begin{lemma}
	Every n-clique in an $n$ cycle corresponds to a mixed strategy nash equilibrium. 
\end{lemma}

\begin{proof}
	content...
\end{proof}

\begin{conjecture}[Impossibility of $n$-cycles ($n>2$)]
	For any graph, the probability of a $n$-cycle continuing indefinitely is zero for $n>2$.
\end{conjecture}

\begin{proof}
	Observe that if an $n$-cycle is stochastic it persists exactly as an $n$-cycle with probability zero. Suppose that an $n$-cycle consists of three colorings $\uu_1,\uu_2,\uu_3$ where $F(\uu_1)=\uu_2$ with probability $p_1$, $F(\uu_2)=\uu_3$ with probability $p_2$ and $F(\uu_3)=\uu_1$ with probability $p_3$. The probability that this three cycle persist forever is clearly $\lim_{k\rightarrow \infty} (p_1p_2p_3)^k$ so if $p_1<1, p_2<1$ or $p_3<1$ this likelihood of the three cycle persisting is zero. 
	
	Therefore we can consider only the case when $p_1=p_2=p_3=1$. Consider the vertex $v$ which cycles through colors $c_1, c_2, c_3$ in the colorings $\uu_1,\uu_2, \uu_3$ respectively. $v$ must have a neighbor which $c_2$ in $\uu_1$, a neighbor $r_2$ which is $c_3$ in $\uu_2$, and a neighbor which is $c_1$ in $\uu_3$. 
	
	 Suppose that these neighbors are the same vertex $r_1$. This $r_1$ is cycling through $c_2,c_3,$ and $c_1$ in $\uu_1,\uu_2,$ and $\uu_3$ respectively. In $\uu_1$ is must have two neighbors which are $c_3$ in $\uu_1$, 

	%v has a neighbor that is infront of it, that neighbor must also have a neighbor that is infront of it. and so on.
	
	From lemma 2 we know that in an $n$ cycle we have a mixed strategy Nash equilibrium. For such an equilibrium to exist each strategy must be playable with probability $1/n$. Because in a mixed strategy, utility must be equal for each strategy  <- this may be an important point, keep thinking about this. 
\end{proof}



\subsection{Further Questions}

\begin{itemize}
	\item Can we find or classify all the graphs which only admit the trivial equilibrium? 
	\item Can we enumerate all the equilibria for a particular graph (can we at least give an upper limit better than $n^n?$)
	\item Can we describe how common equilibria with $r$ cliques are for graphs with $n$ vertices and some edge parameter $p$. 
	\item Can give some upper or lower bounds for connectors or separators between two cliques of given sizes?
	\item Can we classify equilibria possible in trees?
	\item If a graph contains a $K_n$ subgraph, will that $K_n$ subgraph be contained in one cliques (If yes it must be conditional on $n$).
	\item Think about elemental subdivisions. 
\end{itemize}
\section{Stability}
The problem of stability is tricky because it is hard to define. There are many conceptions of stability in this case. We list some below
\subsection{Local Stability} We say that an equilibrium coloring $\mathbf{u}$ is locally stable at a vertex $v_i$ if $\mathbf{u}=F(\tilde{\mathbf{u}})$ for any $\tilde{\mathbf{u}}$ with $\mathbf{u}_{v}=\tilde{\mathbf{u}}_{v}$ for all $v\in V$. This is an $\mathcal{O}(n)$ process to check but we suspect that an algebraic stability condition can be derived. Two steps towards such a condition come as this conjecture and a possible corollary.
\begin{conjecture}
	For any graph $G$ and equilibrium coloring $\mathbf{u}$, $\mathbf{u}$ is locally stable at any vertex which is not adjacent to the boundary of a clique or a vertex of degree 1. 
\end{conjecture} 
\begin{corrollary}
	The trivial equilibrium of any two graph with no vertices of degree one is locally stable at every vertex.
\end{corrollary}
\subsection{Global Stability}
We say that an equilibrium is globally stable if it is stable at every vertex in $G$. Corollary 5 is a global stability statement. It would be helpful to give an algebraic characterization to globally stable equilibria. For instance

\begin{conjecture}{Stability condition}
		Let $A$ be the adjacency matrix of $G$ and let $\mathbf{\chi_i} = [\delta(\mathbf{u}_k,c_i)]_{k=1}^n$. If \begin{equation}
			\chi_i^TA\chi_i>\chi_i^TA\chi_j\quad \forall \, i, j
		\end{equation}
		Then $\mathbf{u}$ is globally stable. 
	
\end{conjecture}

\subsection{Convergent Stability}
If a coloring is stable it has some basin of stability. Describing the basins of stability here will be challenging because strategies are not in a vector space. We can still describe metric between colorings $d:U\times U \rightarrow \mathbb{Z}$
\begin{equation}
	d(\mathbf{u_1},\mathbf{u_2})=\sum_{i=1}^n (1-\delta(\mathbf{u_1}_i,\mathbf{u_2}_i)) \quad \text{ where }\quad  \delta(c_i,c_j)=\begin{cases}
		1 & c_i=c_j\\
		0 & c_i\neq c_j
	\end{cases}
\end{equation}

\begin{conjecture}[$d$ is a metric]
	$d(\mathbf{u_1},\mathbf{u_2})$ ad defined above is a metric in $U$. 
\end{conjecture}

\begin{proof}
	Clearly $d(\mathbf{u_1}\mathbf{u_2})=d(\mathbf{u_2},\mathbf{u_1})$ so we have symmetry. We also have positive definiteness easily from the definition. To prove the Triangle inequality we require a little bit of work. 
\end{proof}

This gives us the tool we need to study the following question: if $u^*$ is an equilibrium coloring, where in $U$ do we have that 
\begin{equation}
	d(\mathbf{u^*},F(\mathbf{u}))\leq d(\mathbf{u^*},\mathbf{u})
\end{equation}
or asked another way, where can we say that there exists some $N\in \mathbb{N}$ such that 
\begin{equation}
	d(\mathbf{u^*},F^n(\mathbf{u}))=0 \text{ for } n\geq N
\end{equation}
\subsection{Structural Stability}
Kemeney's constant work. When does adding an edge destabilize an equilibrium coloring
\section{Boundary Value Problem}

Thinking about compatible boundary data
Thinking about a process for finding an ``Equilibrium interpolation" like Peron's method of harmonic lifting. 
Thinking this might be most interesting for k-connected graphs $k\geq 2$. 
\bibliographystyle{plain}
\bibliography{structuredcoord.bib}
\end{document}
